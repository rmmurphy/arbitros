\hypertarget{mag_plot_8m}{\section{C\-:/arbitros/trunk/drivers/matlab/ins/mag\-Plot.m File Reference}
\label{mag_plot_8m}\index{C\-:/arbitros/trunk/drivers/matlab/ins/mag\-Plot.\-m@{C\-:/arbitros/trunk/drivers/matlab/ins/mag\-Plot.\-m}}
}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
using \hyperlink{mag_plot_8m_a3fe224e6a3cead3a2b66a2ccbbb47706}{position.\-Hnew} = (\hyperlink{mag_plot_8m_abfa0020b68a6a95a517fb4f6e2ac911a}{Hnew} $\ast$\hyperlink{mag_plot_8m_ab9c49d889082cfa6e9f1fe1be0fddced}{Winv} $\ast$\hyperlink{mag_plot_8m_a029115ba7fd63b2451bf33fbe427ce63}{S})$\ast$\hyperlink{mag_plot_8m_ab9c49d889082cfa6e9f1fe1be0fddced}{Winv}'
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{mag_plot_8m_ae3cf707f4656149c19b43d5458eb0eee}{H} \hyperlink{mag_plot_8m_a51bd24325607cac09c483b9dd862bacc}{fix} ()
\item 
id \hyperlink{mag_plot_8m_aee307926074ece43f45be386744f9397}{pi} ()
\item 
\hyperlink{mag_plot_8m_aba7552ec483a840ccf954dbe1992a2ba}{cos} (\hyperlink{mag_plot_8m_a7993a910e3864ada05ae35fe7205d276}{roll})$\ast$sin(\hyperlink{mag_plot_8m_aaeddb3af347c13f3d0915fb2e613acce}{yaw}) cos(\hyperlink{mag_plot_8m_afe627986b4147fc678023fb03e010791}{pitch})$\ast$cos(\hyperlink{mag_plot_8m_aaeddb3af347c13f3d0915fb2e613acce}{yaw})+sin(\hyperlink{mag_plot_8m_afe627986b4147fc678023fb03e010791}{pitch})$\ast$sin(\hyperlink{mag_plot_8m_a7993a910e3864ada05ae35fe7205d276}{roll})$\ast$sin(\hyperlink{mag_plot_8m_aaeddb3af347c13f3d0915fb2e613acce}{yaw})-\/sin(\hyperlink{mag_plot_8m_afe627986b4147fc678023fb03e010791}{pitch})$\ast$cos(\hyperlink{mag_plot_8m_aaeddb3af347c13f3d0915fb2e613acce}{yaw})+cos(\hyperlink{mag_plot_8m_afe627986b4147fc678023fb03e010791}{pitch})$\ast$sin(\hyperlink{mag_plot_8m_a7993a910e3864ada05ae35fe7205d276}{roll})$\ast$sin(\hyperlink{mag_plot_8m_aaeddb3af347c13f3d0915fb2e613acce}{yaw})
\item 
\hyperlink{mag_plot_8m_a7993a910e3864ada05ae35fe7205d276}{roll} \hyperlink{mag_plot_8m_aac264cb7a3e98c2dbba574f8245043bf}{cos} ()
\item 
\hyperlink{mag_plot_8m_ae3cf707f4656149c19b43d5458eb0eee}{H} (1\-:32\-:\hyperlink{error_state_kalman_8m_afb358f48b1646c750fb9da6c6585be2b}{end},\-:)
\item 
\hyperlink{mag_plot_8m_a121edc20c9cc04dbddded13213ac4381}{fprintf} ( '\hyperlink{mag_plot_8m_aeb433e010faa9484e095b9b41e70a5ea}{Ellipsoid} center\-:\%.\-3g\%.\-3g\%.\-3g\textbackslash{}n', center)
\item 
\hyperlink{mag_plot_8m_a6d7e017d175c6feed2c9ed3f44cc903b}{fprintf} ( '\hyperlink{mag_plot_8m_aeb433e010faa9484e095b9b41e70a5ea}{Ellipsoid} radii\-:\%.\-3g\%.\-3g\%.\-3g\textbackslash{}n', radii)
\item 
\hyperlink{mag_plot_8m_a2a974a06a08f40e41a4f66e12872e630}{fprintf} ( '\hyperlink{mag_plot_8m_aeb433e010faa9484e095b9b41e70a5ea}{Ellipsoid} evecs\-:\textbackslash{}n')
\item 
\hyperlink{mag_plot_8m_ac1de65a870e3ebd8d50f855f5424e998}{fprintf} ( '\%.\-3g\%.\-3g\%.\-3g\textbackslash{}n\%.\-3g\%.\-3g\%.\-3g\textbackslash{}n\%.\-3g\%.\-3g\%.\-3g\textbackslash{}n',...\-evecs(1), evecs(2), evecs(3), evecs(4), evecs(5), evecs(6), evecs(7), evecs(8), evecs(9))
\item 
\hyperlink{mag_plot_8m_a201601672d6c8295ee23e9e73e8df220}{fprintf} ( 'Algebraic form\-:\textbackslash{}n')
\item 
\hyperlink{mag_plot_8m_ac3ce5f3a538ba143f1723a1eaa046781}{fprintf} ( '\%.\-3g ', v)
\item 
\hyperlink{mag_plot_8m_a4cda6577b2867160825b426f556da2fd}{fprintf} ( '\textbackslash{}n')
\item 
draw \hyperlink{mag_plot_8m_a319265c6545ca1709d9d77b54665cf1b}{data} \hyperlink{mag_plot_8m_ad2989a5ff4adf55da96d6281e46b697b}{plot3} (\hyperlink{mag_plot_8m_a9336ebf25087d91c818ee6e9ec29f8c1}{x}, \hyperlink{mag_plot_8m_a2fb1c5cf58867b5bbc9a1b145a86f3a0}{y}, \hyperlink{mag_plot_8m_a25ed1bcb423b0b7200f485fc5ff71c8e}{z}, '.\hyperlink{error_state_kalman_8m_a514f1b439f404f86f77090fa9edc96ce}{r}')
\item 
\hyperlink{mag_plot_8m_a151e4f4abf8a0ee8ab837deab1750257}{xlabel} ('\hyperlink{mag_plot_8m_a9336ebf25087d91c818ee6e9ec29f8c1}{x}') ylabel('\hyperlink{mag_plot_8m_a2fb1c5cf58867b5bbc9a1b145a86f3a0}{y}') zlabel('\hyperlink{mag_plot_8m_a25ed1bcb423b0b7200f485fc5ff71c8e}{z}') axis(\mbox{[}-\/\hyperlink{mag_plot_8m_a113d58bb185e41a495105553b1054a32}{maxd} \hyperlink{mag_plot_8m_a113d58bb185e41a495105553b1054a32}{maxd}-\/\hyperlink{mag_plot_8m_a113d58bb185e41a495105553b1054a32}{maxd} \hyperlink{mag_plot_8m_a113d58bb185e41a495105553b1054a32}{maxd}-\/\hyperlink{mag_plot_8m_a113d58bb185e41a495105553b1054a32}{maxd} \hyperlink{mag_plot_8m_a113d58bb185e41a495105553b1054a32}{maxd}\mbox{]})
\item 
\hyperlink{mag_plot_8m_a73decca241705c984c5c9568c52f2ba9}{line} (\hyperlink{ellipsoid__fit_8m_a7de95afff3150493c5595c8c887be60c}{evecs}(1, 3), \hyperlink{ellipsoid__fit_8m_a7de95afff3150493c5595c8c887be60c}{evecs}(2, 3), \hyperlink{ellipsoid__fit_8m_a7de95afff3150493c5595c8c887be60c}{evecs}(3, 3))
\item 
\hyperlink{mag_plot_8m_ad2662db5453e8a5f0599a49c28da1c65}{set} (\hyperlink{mag_plot_8m_ac483f6ce851c9ecd9fb835ff7551737c}{p}, 'Face\-Color', 'g', 'Edge\-Color', 'none')
\item 
\hyperlink{mag_plot_8m_a46086883d1e573c638a6d8f3a9eeca03}{view} (-\/25, 15.\-5)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
test ellipsoid fit create the test \hyperlink{mag_plot_8m_a319265c6545ca1709d9d77b54665cf1b}{data}
\item 
\hyperlink{mag_plot_8m_a7993a910e3864ada05ae35fe7205d276}{roll} = \hyperlink{mag_plot_8m_aee307926074ece43f45be386744f9397}{pi}/4
\item 
\hyperlink{mag_plot_8m_afe627986b4147fc678023fb03e010791}{pitch} = 0
\item 
\hyperlink{mag_plot_8m_aaeddb3af347c13f3d0915fb2e613acce}{yaw} = 0
\item 
\hyperlink{mag_plot_8m_a16d5d24f5b09a1991bd4e5f57bf11237}{pi}
\item 
\hyperlink{mag_plot_8m_ab4c954400b2a2af07b5e5221a63776e4}{cal\-Env} = 4096
\item 
Used for giving the readings \\*
some more distortion in order \\*
to test out the performance of \\*
the \hyperlink{ahrs_8m_a83faab68a35ae3221d423fcb1ecfb01e}{algorithm} \hyperlink{mag_plot_8m_abc6f7ce94f6d8d05662e339bd0f0150f}{R\-O\-T} = \mbox{[}\hyperlink{mag_plot_8m_aac264cb7a3e98c2dbba574f8245043bf}{cos}(\hyperlink{mag_plot_8m_a7993a910e3864ada05ae35fe7205d276}{roll})$\ast$\hyperlink{mag_plot_8m_aac264cb7a3e98c2dbba574f8245043bf}{cos}(\hyperlink{mag_plot_8m_aaeddb3af347c13f3d0915fb2e613acce}{yaw}) -\/\hyperlink{mag_plot_8m_aac264cb7a3e98c2dbba574f8245043bf}{cos}(\hyperlink{mag_plot_8m_afe627986b4147fc678023fb03e010791}{pitch})$\ast$sin(\hyperlink{mag_plot_8m_aaeddb3af347c13f3d0915fb2e613acce}{yaw}) + sin(\hyperlink{mag_plot_8m_afe627986b4147fc678023fb03e010791}{pitch})$\ast$sin(\hyperlink{mag_plot_8m_a7993a910e3864ada05ae35fe7205d276}{roll})$\ast$\hyperlink{mag_plot_8m_aac264cb7a3e98c2dbba574f8245043bf}{cos}(\hyperlink{mag_plot_8m_aaeddb3af347c13f3d0915fb2e613acce}{yaw}) sin(\hyperlink{mag_plot_8m_afe627986b4147fc678023fb03e010791}{pitch})$\ast$sin(\hyperlink{mag_plot_8m_aaeddb3af347c13f3d0915fb2e613acce}{yaw})+\hyperlink{mag_plot_8m_aac264cb7a3e98c2dbba574f8245043bf}{cos}(\hyperlink{mag_plot_8m_afe627986b4147fc678023fb03e010791}{pitch})$\ast$sin(\hyperlink{mag_plot_8m_a7993a910e3864ada05ae35fe7205d276}{roll})$\ast$\hyperlink{mag_plot_8m_aac264cb7a3e98c2dbba574f8245043bf}{cos}(\hyperlink{mag_plot_8m_aaeddb3af347c13f3d0915fb2e613acce}{yaw})
\item 
The axis scale factors as \\*
calculated by the least \hyperlink{ahrs_8m_a5ee419443ced73d345810f5724d7f1b8}{mean} \\*
squares estimator needed to \\*
translate the axis of the \\*
ellipsoid back onto \hyperlink{ellipsoid__fit_8m_a44f09445f90540f74824a1839982d0de}{a} sphere \\*
of radius \hyperlink{mag_plot_8m_a029115ba7fd63b2451bf33fbe427ce63}{S}
\item 
The rotation \hyperlink{ahrs_8m_afa199521a240e64469e26df8973798f0}{and} scale factors \hyperlink{mag_plot_8m_ab9c49d889082cfa6e9f1fe1be0fddced}{Winv}
\item 
The \hyperlink{ahrs_8m_aebc7d7462b5d60cbdfd443bacf4d3132}{bias} as calculated by the \\*
least \hyperlink{ahrs_8m_a5ee419443ced73d345810f5724d7f1b8}{mean} squares estimator \hyperlink{mag_plot_8m_a4f0c7a864c82ecffdd637358f88fa57d}{B} = \mbox{[}-\/97.\-12036 33.\-46997 -\/10.\-94434\mbox{]}
\item 
\hyperlink{mag_plot_8m_abfa0020b68a6a95a517fb4f6e2ac911a}{Hnew} = \hyperlink{mag_plot_8m_ae3cf707f4656149c19b43d5458eb0eee}{H}
\item 
Apply corrections in order to \\*
turn the ellipse back into \hyperlink{ellipsoid__fit_8m_a44f09445f90540f74824a1839982d0de}{a} \\*
sphere \hyperlink{mag_plot_8m_a9336ebf25087d91c818ee6e9ec29f8c1}{x} = \hyperlink{mag_plot_8m_abfa0020b68a6a95a517fb4f6e2ac911a}{Hnew}(\-:,1)-\/\hyperlink{mag_plot_8m_a4f0c7a864c82ecffdd637358f88fa57d}{B}(1)
\item 
\hyperlink{mag_plot_8m_a2fb1c5cf58867b5bbc9a1b145a86f3a0}{y} = \hyperlink{mag_plot_8m_abfa0020b68a6a95a517fb4f6e2ac911a}{Hnew}(\-:,2)-\/\hyperlink{mag_plot_8m_a4f0c7a864c82ecffdd637358f88fa57d}{B}(2)
\item 
\hyperlink{mag_plot_8m_a25ed1bcb423b0b7200f485fc5ff71c8e}{z} = \hyperlink{mag_plot_8m_abfa0020b68a6a95a517fb4f6e2ac911a}{Hnew}(\-:,3)-\/\hyperlink{mag_plot_8m_a4f0c7a864c82ecffdd637358f88fa57d}{B}(3)
\item 
do the \hyperlink{mag_plot_8m_a826da4c11282c59b42810cfa716f616e}{fitting} \mbox{[}\hyperlink{ellipsoid__fit_8m_aded1d98bab231dedd1e85ecf5f1aeca3}{center}, \hyperlink{ellipsoid__fit_8m_a5c11ff4f5370dcd098585cf3d47702a4}{radii}, \hyperlink{ellipsoid__fit_8m_a7de95afff3150493c5595c8c887be60c}{evecs}, \hyperlink{ellipsoid__fit_8m_acc4a0efce1aac171b5728dd09160ddbf}{v}\mbox{]} = ellipsoid\-\_\-fit( \mbox{[}\hyperlink{mag_plot_8m_a9336ebf25087d91c818ee6e9ec29f8c1}{x} \hyperlink{mag_plot_8m_a2fb1c5cf58867b5bbc9a1b145a86f3a0}{y} \hyperlink{mag_plot_8m_a25ed1bcb423b0b7200f485fc5ff71c8e}{z} \mbox{]},0)
\item 
\hyperlink{mag_plot_8m_a2389d0885d2aaf6d6cac65517221d4ef}{max\-X} = max(abs(\hyperlink{mag_plot_8m_a9336ebf25087d91c818ee6e9ec29f8c1}{x}))
\item 
\hyperlink{mag_plot_8m_a9dc4d2d0fed0b6a054e54b771c4e8aa1}{max\-Y} = max(abs(\hyperlink{mag_plot_8m_a2fb1c5cf58867b5bbc9a1b145a86f3a0}{y}))
\item 
\hyperlink{mag_plot_8m_a08ae91ec69e64fa4b40db46e2ef46783}{max\-Z} = max(abs(\hyperlink{mag_plot_8m_a25ed1bcb423b0b7200f485fc5ff71c8e}{z}))
\item 
\hyperlink{mag_plot_8m_a113d58bb185e41a495105553b1054a32}{maxd} = max(\mbox{[}\hyperlink{mag_plot_8m_a2389d0885d2aaf6d6cac65517221d4ef}{max\-X} \hyperlink{mag_plot_8m_a9dc4d2d0fed0b6a054e54b771c4e8aa1}{max\-Y} \hyperlink{mag_plot_8m_a08ae91ec69e64fa4b40db46e2ef46783}{max\-Z}\mbox{]})
\item 
grid \hyperlink{mag_plot_8m_a58ab1fd68e97078232808206b850161b}{on}
\item 
\hyperlink{mag_plot_8m_ae5f3bfeb7e3cb5c8bc769d5504ebeeae}{step} = \hyperlink{mag_plot_8m_a113d58bb185e41a495105553b1054a32}{maxd} / 50
\item 
\hyperlink{mag_plot_8m_aeb433e010faa9484e095b9b41e70a5ea}{Ellipsoid}
\item 
\hyperlink{mag_plot_8m_ac483f6ce851c9ecd9fb835ff7551737c}{p} = patch( isosurface( \hyperlink{mag_plot_8m_a9336ebf25087d91c818ee6e9ec29f8c1}{x}, \hyperlink{mag_plot_8m_a2fb1c5cf58867b5bbc9a1b145a86f3a0}{y}, \hyperlink{mag_plot_8m_a25ed1bcb423b0b7200f485fc5ff71c8e}{z}, \hyperlink{mag_plot_8m_aeb433e010faa9484e095b9b41e70a5ea}{Ellipsoid}, 1 ) )
\item 
axis \hyperlink{mag_plot_8m_ac06af72866e1ad098c66d9c182c77646}{vis3d}
\item 
\hyperlink{mag_plot_8m_a3b5a139c32a9ef18cf2334eea786bd0d}{camlight}
\item 
lighting \hyperlink{mag_plot_8m_a4bdd65848da246ff2688ec7971b9c719}{phong}
\end{DoxyCompactItemize}


\subsection{Typedef Documentation}
\hypertarget{mag_plot_8m_a3fe224e6a3cead3a2b66a2ccbbb47706}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!position.\-Hnew@{position.\-Hnew}}
\index{position.\-Hnew@{position.\-Hnew}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{position.\-Hnew}]{\setlength{\rightskip}{0pt plus 5cm}using position.
{\bf Hnew} =  ({\bf Hnew}$\ast${\bf Winv}$\ast${\bf S})$\ast${\bf Winv}'}}\label{mag_plot_8m_a3fe224e6a3cead3a2b66a2ccbbb47706}


\subsection{Function Documentation}
\hypertarget{mag_plot_8m_aba7552ec483a840ccf954dbe1992a2ba}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!cos@{cos}}
\index{cos@{cos}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{cos}]{\setlength{\rightskip}{0pt plus 5cm}cos (
\begin{DoxyParamCaption}
\item[{{\bf roll}}]{}
\end{DoxyParamCaption}
)}}\label{mag_plot_8m_aba7552ec483a840ccf954dbe1992a2ba}
\hypertarget{mag_plot_8m_aac264cb7a3e98c2dbba574f8245043bf}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!cos@{cos}}
\index{cos@{cos}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{cos}]{\setlength{\rightskip}{0pt plus 5cm}{\bf roll} cos (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{mag_plot_8m_aac264cb7a3e98c2dbba574f8245043bf}
\hypertarget{mag_plot_8m_a51bd24325607cac09c483b9dd862bacc}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!fix@{fix}}
\index{fix@{fix}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{fix}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H} fix (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{mag_plot_8m_a51bd24325607cac09c483b9dd862bacc}
\hypertarget{mag_plot_8m_a121edc20c9cc04dbddded13213ac4381}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!fprintf@{fprintf}}
\index{fprintf@{fprintf}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{fprintf}]{\setlength{\rightskip}{0pt plus 5cm}fprintf (
\begin{DoxyParamCaption}
\item[{'{\bf Ellipsoid} center\-:\%.\-3g\%.\-3g\%.\-3g\textbackslash{}n'}]{, }
\item[{{\bf center}}]{}
\end{DoxyParamCaption}
)}}\label{mag_plot_8m_a121edc20c9cc04dbddded13213ac4381}
\hypertarget{mag_plot_8m_a6d7e017d175c6feed2c9ed3f44cc903b}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!fprintf@{fprintf}}
\index{fprintf@{fprintf}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{fprintf}]{\setlength{\rightskip}{0pt plus 5cm}fprintf (
\begin{DoxyParamCaption}
\item[{'{\bf Ellipsoid} radii\-:\%.\-3g\%.\-3g\%.\-3g\textbackslash{}n'}]{, }
\item[{{\bf radii}}]{}
\end{DoxyParamCaption}
)}}\label{mag_plot_8m_a6d7e017d175c6feed2c9ed3f44cc903b}
\hypertarget{mag_plot_8m_a2a974a06a08f40e41a4f66e12872e630}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!fprintf@{fprintf}}
\index{fprintf@{fprintf}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{fprintf}]{\setlength{\rightskip}{0pt plus 5cm}fprintf (
\begin{DoxyParamCaption}
\item[{'{\bf Ellipsoid} evecs\-:\textbackslash{}n'}]{}
\end{DoxyParamCaption}
)}}\label{mag_plot_8m_a2a974a06a08f40e41a4f66e12872e630}
\hypertarget{mag_plot_8m_ac1de65a870e3ebd8d50f855f5424e998}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!fprintf@{fprintf}}
\index{fprintf@{fprintf}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{fprintf}]{\setlength{\rightskip}{0pt plus 5cm}fprintf (
\begin{DoxyParamCaption}
\item[{'\%.\-3g\%.\-3g\%.\-3g\textbackslash{}n\%.\-3g\%.\-3g\%.\-3g\textbackslash{}n\%.\-3g\%.\-3g\%.\-3g\textbackslash{}n'}]{, }
\item[{}]{evecs1, }
\item[{{\bf evecs}(2)}]{, }
\item[{{\bf evecs}(3)}]{, }
\item[{{\bf evecs}(4)}]{, }
\item[{{\bf evecs}(5)}]{, }
\item[{{\bf evecs}(6)}]{, }
\item[{{\bf evecs}(7)}]{, }
\item[{{\bf evecs}(8)}]{, }
\item[{{\bf evecs}(9)}]{}
\end{DoxyParamCaption}
)}}\label{mag_plot_8m_ac1de65a870e3ebd8d50f855f5424e998}
\hypertarget{mag_plot_8m_a201601672d6c8295ee23e9e73e8df220}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!fprintf@{fprintf}}
\index{fprintf@{fprintf}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{fprintf}]{\setlength{\rightskip}{0pt plus 5cm}fprintf (
\begin{DoxyParamCaption}
\item[{'Algebraic form\-:\textbackslash{}n'}]{}
\end{DoxyParamCaption}
)}}\label{mag_plot_8m_a201601672d6c8295ee23e9e73e8df220}
\hypertarget{mag_plot_8m_ac3ce5f3a538ba143f1723a1eaa046781}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!fprintf@{fprintf}}
\index{fprintf@{fprintf}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{fprintf}]{\setlength{\rightskip}{0pt plus 5cm}fprintf (
\begin{DoxyParamCaption}
\item[{'\%.\-3g '}]{, }
\item[{{\bf v}}]{}
\end{DoxyParamCaption}
)}}\label{mag_plot_8m_ac3ce5f3a538ba143f1723a1eaa046781}
\hypertarget{mag_plot_8m_a4cda6577b2867160825b426f556da2fd}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!fprintf@{fprintf}}
\index{fprintf@{fprintf}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{fprintf}]{\setlength{\rightskip}{0pt plus 5cm}fprintf (
\begin{DoxyParamCaption}
\item[{'\textbackslash{}n'}]{}
\end{DoxyParamCaption}
)}}\label{mag_plot_8m_a4cda6577b2867160825b426f556da2fd}
\hypertarget{mag_plot_8m_ae3cf707f4656149c19b43d5458eb0eee}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!H@{H}}
\index{H@{H}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{H}]{\setlength{\rightskip}{0pt plus 5cm}H (
\begin{DoxyParamCaption}
\item[{1\-:32\-:{\bf end}}]{, }
\item[{\-:}]{}
\end{DoxyParamCaption}
)}}\label{mag_plot_8m_ae3cf707f4656149c19b43d5458eb0eee}
\hypertarget{mag_plot_8m_a73decca241705c984c5c9568c52f2ba9}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!line@{line}}
\index{line@{line}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{line}]{\setlength{\rightskip}{0pt plus 5cm}line (
\begin{DoxyParamCaption}
\item[{{\bf evecs}(1, 3)}]{, }
\item[{{\bf evecs}(2, 3)}]{, }
\item[{{\bf evecs}(3, 3)}]{}
\end{DoxyParamCaption}
)}}\label{mag_plot_8m_a73decca241705c984c5c9568c52f2ba9}
\hypertarget{mag_plot_8m_aee307926074ece43f45be386744f9397}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!pi@{pi}}
\index{pi@{pi}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{pi}]{\setlength{\rightskip}{0pt plus 5cm}id pi (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{mag_plot_8m_aee307926074ece43f45be386744f9397}
\hypertarget{mag_plot_8m_ad2989a5ff4adf55da96d6281e46b697b}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!plot3@{plot3}}
\index{plot3@{plot3}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{plot3}]{\setlength{\rightskip}{0pt plus 5cm}draw {\bf data} plot3 (
\begin{DoxyParamCaption}
\item[{{\bf x}}]{, }
\item[{{\bf y}}]{, }
\item[{{\bf z}}]{, }
\item[{'.{\bf r}'}]{}
\end{DoxyParamCaption}
)}}\label{mag_plot_8m_ad2989a5ff4adf55da96d6281e46b697b}
\hypertarget{mag_plot_8m_ad2662db5453e8a5f0599a49c28da1c65}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!set@{set}}
\index{set@{set}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{set}]{\setlength{\rightskip}{0pt plus 5cm}set (
\begin{DoxyParamCaption}
\item[{{\bf p}}]{, }
\item[{'Face\-Color'}]{, }
\item[{'g'}]{, }
\item[{'Edge\-Color'}]{, }
\item[{'none'}]{}
\end{DoxyParamCaption}
)}}\label{mag_plot_8m_ad2662db5453e8a5f0599a49c28da1c65}
\hypertarget{mag_plot_8m_a46086883d1e573c638a6d8f3a9eeca03}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!view@{view}}
\index{view@{view}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{view}]{\setlength{\rightskip}{0pt plus 5cm}view (
\begin{DoxyParamCaption}
\item[{-\/}]{25, }
\item[{15.}]{5}
\end{DoxyParamCaption}
)}}\label{mag_plot_8m_a46086883d1e573c638a6d8f3a9eeca03}
\hypertarget{mag_plot_8m_a151e4f4abf8a0ee8ab837deab1750257}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!xlabel@{xlabel}}
\index{xlabel@{xlabel}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{xlabel}]{\setlength{\rightskip}{0pt plus 5cm}xlabel (
\begin{DoxyParamCaption}
\item[{'{\bf x}'}]{}
\end{DoxyParamCaption}
)}}\label{mag_plot_8m_a151e4f4abf8a0ee8ab837deab1750257}


\subsection{Variable Documentation}
\hypertarget{mag_plot_8m_a4f0c7a864c82ecffdd637358f88fa57d}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!B@{B}}
\index{B@{B}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{B}]{\setlength{\rightskip}{0pt plus 5cm}The {\bf bias} as calculated by the least {\bf mean} squares estimator B = \mbox{[}-\/97.\-12036 33.\-46997 -\/10.\-94434\mbox{]}}}\label{mag_plot_8m_a4f0c7a864c82ecffdd637358f88fa57d}
\hypertarget{mag_plot_8m_ab4c954400b2a2af07b5e5221a63776e4}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!cal\-Env@{cal\-Env}}
\index{cal\-Env@{cal\-Env}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{cal\-Env}]{\setlength{\rightskip}{0pt plus 5cm}cal\-Env = 4096}}\label{mag_plot_8m_ab4c954400b2a2af07b5e5221a63776e4}
\hypertarget{mag_plot_8m_a3b5a139c32a9ef18cf2334eea786bd0d}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!camlight@{camlight}}
\index{camlight@{camlight}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{camlight}]{\setlength{\rightskip}{0pt plus 5cm}camlight}}\label{mag_plot_8m_a3b5a139c32a9ef18cf2334eea786bd0d}
\hypertarget{mag_plot_8m_a319265c6545ca1709d9d77b54665cf1b}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!data@{data}}
\index{data@{data}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{data}]{\setlength{\rightskip}{0pt plus 5cm}test ellipsoid fit create the test data}}\label{mag_plot_8m_a319265c6545ca1709d9d77b54665cf1b}
\hypertarget{mag_plot_8m_aeb433e010faa9484e095b9b41e70a5ea}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!Ellipsoid@{Ellipsoid}}
\index{Ellipsoid@{Ellipsoid}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{Ellipsoid}]{\setlength{\rightskip}{0pt plus 5cm}Ellipsoid}}\label{mag_plot_8m_aeb433e010faa9484e095b9b41e70a5ea}
{\bfseries Initial value\-:}
\begin{DoxyCode}
= \hyperlink{ellipsoid__fit_8m_ad89a7fd19b370101b0ffd846590ff83b}{v}(1) *\hyperlink{namespacearbitros_ahrs_a9336ebf25087d91c818ee6e9ec29f8c1}{x}.*\hyperlink{namespacearbitros_ahrs_a9336ebf25087d91c818ee6e9ec29f8c1}{x} +   \hyperlink{ellipsoid__fit_8m_ad89a7fd19b370101b0ffd846590ff83b}{v}(2) * \hyperlink{namespacearbitros_ahrs_a2fb1c5cf58867b5bbc9a1b145a86f3a0}{y}.*\hyperlink{namespacearbitros_ahrs_a2fb1c5cf58867b5bbc9a1b145a86f3a0}{y} + \hyperlink{ellipsoid__fit_8m_ad89a7fd19b370101b0ffd846590ff83b}{v}(3) * \hyperlink{ellipsoid__fit_8m_a25ed1bcb423b0b7200f485fc5ff71c8e}{z}.*\hyperlink{ellipsoid__fit_8m_a25ed1bcb423b0b7200f485fc5ff71c8e}{z} + ...
          2*\hyperlink{ellipsoid__fit_8m_ad89a7fd19b370101b0ffd846590ff83b}{v}(4) *\hyperlink{namespacearbitros_ahrs_a9336ebf25087d91c818ee6e9ec29f8c1}{x}.*\hyperlink{namespacearbitros_ahrs_a2fb1c5cf58867b5bbc9a1b145a86f3a0}{y} + 2*\hyperlink{ellipsoid__fit_8m_ad89a7fd19b370101b0ffd846590ff83b}{v}(5)*\hyperlink{namespacearbitros_ahrs_a9336ebf25087d91c818ee6e9ec29f8c1}{x}.*\hyperlink{ellipsoid__fit_8m_a25ed1bcb423b0b7200f485fc5ff71c8e}{z} + 2*\hyperlink{ellipsoid__fit_8m_ad89a7fd19b370101b0ffd846590ff83b}{v}(6) * \hyperlink{namespacearbitros_ahrs_a2fb1c5cf58867b5bbc9a1b145a86f3a0}{y}.*\hyperlink{ellipsoid__fit_8m_a25ed1bcb423b0b7200f485fc5ff71c8e}{z} + ...
          2*\hyperlink{ellipsoid__fit_8m_ad89a7fd19b370101b0ffd846590ff83b}{v}(7) *\hyperlink{namespacearbitros_ahrs_a9336ebf25087d91c818ee6e9ec29f8c1}{x}    + 2*\hyperlink{ellipsoid__fit_8m_ad89a7fd19b370101b0ffd846590ff83b}{v}(8)*\hyperlink{namespacearbitros_ahrs_a2fb1c5cf58867b5bbc9a1b145a86f3a0}{y}    + 2*\hyperlink{ellipsoid__fit_8m_ad89a7fd19b370101b0ffd846590ff83b}{v}(9) * \hyperlink{ellipsoid__fit_8m_a25ed1bcb423b0b7200f485fc5ff71c8e}{z}
\end{DoxyCode}
\hypertarget{mag_plot_8m_a826da4c11282c59b42810cfa716f616e}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!fitting@{fitting}}
\index{fitting@{fitting}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{fitting}]{\setlength{\rightskip}{0pt plus 5cm}do the fitting\mbox{[}{\bf center}, {\bf radii}, {\bf evecs}, {\bf v}\mbox{]} = ellipsoid\-\_\-fit( \mbox{[}{\bf x} {\bf y} {\bf z} \mbox{]},0)}}\label{mag_plot_8m_a826da4c11282c59b42810cfa716f616e}
\hypertarget{mag_plot_8m_abfa0020b68a6a95a517fb4f6e2ac911a}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!Hnew@{Hnew}}
\index{Hnew@{Hnew}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{Hnew}]{\setlength{\rightskip}{0pt plus 5cm}Hnew = {\bf H}}}\label{mag_plot_8m_abfa0020b68a6a95a517fb4f6e2ac911a}
\hypertarget{mag_plot_8m_a113d58bb185e41a495105553b1054a32}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!maxd@{maxd}}
\index{maxd@{maxd}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{maxd}]{\setlength{\rightskip}{0pt plus 5cm}draw fit maxd = max(\mbox{[}{\bf max\-X} {\bf max\-Y} {\bf max\-Z}\mbox{]})}}\label{mag_plot_8m_a113d58bb185e41a495105553b1054a32}
\hypertarget{mag_plot_8m_a2389d0885d2aaf6d6cac65517221d4ef}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!max\-X@{max\-X}}
\index{max\-X@{max\-X}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{max\-X}]{\setlength{\rightskip}{0pt plus 5cm}max\-X = max(abs({\bf x}))}}\label{mag_plot_8m_a2389d0885d2aaf6d6cac65517221d4ef}
\hypertarget{mag_plot_8m_a9dc4d2d0fed0b6a054e54b771c4e8aa1}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!max\-Y@{max\-Y}}
\index{max\-Y@{max\-Y}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{max\-Y}]{\setlength{\rightskip}{0pt plus 5cm}max\-Y = max(abs({\bf y}))}}\label{mag_plot_8m_a9dc4d2d0fed0b6a054e54b771c4e8aa1}
\hypertarget{mag_plot_8m_a08ae91ec69e64fa4b40db46e2ef46783}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!max\-Z@{max\-Z}}
\index{max\-Z@{max\-Z}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{max\-Z}]{\setlength{\rightskip}{0pt plus 5cm}max\-Z = max(abs({\bf z}))}}\label{mag_plot_8m_a08ae91ec69e64fa4b40db46e2ef46783}
\hypertarget{mag_plot_8m_a58ab1fd68e97078232808206b850161b}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!on@{on}}
\index{on@{on}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{on}]{\setlength{\rightskip}{0pt plus 5cm}hold on}}\label{mag_plot_8m_a58ab1fd68e97078232808206b850161b}
\hypertarget{mag_plot_8m_ac483f6ce851c9ecd9fb835ff7551737c}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!p@{p}}
\index{p@{p}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{p}]{\setlength{\rightskip}{0pt plus 5cm}p = patch( isosurface( {\bf x}, {\bf y}, {\bf z}, {\bf Ellipsoid}, 1 ) )}}\label{mag_plot_8m_ac483f6ce851c9ecd9fb835ff7551737c}
\hypertarget{mag_plot_8m_a4bdd65848da246ff2688ec7971b9c719}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!phong@{phong}}
\index{phong@{phong}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{phong}]{\setlength{\rightskip}{0pt plus 5cm}lighting phong}}\label{mag_plot_8m_a4bdd65848da246ff2688ec7971b9c719}
\hypertarget{mag_plot_8m_a16d5d24f5b09a1991bd4e5f57bf11237}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!pi@{pi}}
\index{pi@{pi}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{pi}]{\setlength{\rightskip}{0pt plus 5cm}pi}}\label{mag_plot_8m_a16d5d24f5b09a1991bd4e5f57bf11237}
\hypertarget{mag_plot_8m_afe627986b4147fc678023fb03e010791}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!pitch@{pitch}}
\index{pitch@{pitch}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{pitch}]{\setlength{\rightskip}{0pt plus 5cm}pitch = 0}}\label{mag_plot_8m_afe627986b4147fc678023fb03e010791}
\hypertarget{mag_plot_8m_a7993a910e3864ada05ae35fe7205d276}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!roll@{roll}}
\index{roll@{roll}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{roll}]{\setlength{\rightskip}{0pt plus 5cm}roll = {\bf pi}/4}}\label{mag_plot_8m_a7993a910e3864ada05ae35fe7205d276}
\hypertarget{mag_plot_8m_abc6f7ce94f6d8d05662e339bd0f0150f}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!R\-O\-T@{R\-O\-T}}
\index{R\-O\-T@{R\-O\-T}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{R\-O\-T}]{\setlength{\rightskip}{0pt plus 5cm}Used for giving the readings some more distortion in order to test out the performance of the {\bf algorithm} R\-O\-T = \mbox{[}{\bf cos}({\bf roll})$\ast${\bf cos}({\bf yaw}) -\/{\bf cos}({\bf pitch})$\ast$sin({\bf yaw}) + sin({\bf pitch})$\ast$sin({\bf roll})$\ast${\bf cos}({\bf yaw}) sin({\bf pitch})$\ast$sin({\bf yaw})+{\bf cos}({\bf pitch})$\ast$sin({\bf roll})$\ast${\bf cos}({\bf yaw})}}\label{mag_plot_8m_abc6f7ce94f6d8d05662e339bd0f0150f}
\hypertarget{mag_plot_8m_a029115ba7fd63b2451bf33fbe427ce63}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!S@{S}}
\index{S@{S}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{S}]{\setlength{\rightskip}{0pt plus 5cm}The axis scale factors as calculated by the least {\bf mean} squares estimator needed to translate the axis of the ellipsoid back onto {\bf a} sphere of radius S}}\label{mag_plot_8m_a029115ba7fd63b2451bf33fbe427ce63}
{\bfseries Initial value\-:}
\begin{DoxyCode}
= [    5.65514                        0                         0
                         0    12.96103                        0
                         0                         0    22.78584]
\end{DoxyCode}
\hypertarget{mag_plot_8m_ae5f3bfeb7e3cb5c8bc769d5504ebeeae}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!step@{step}}
\index{step@{step}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{step}]{\setlength{\rightskip}{0pt plus 5cm}step = {\bf maxd} / 50}}\label{mag_plot_8m_ae5f3bfeb7e3cb5c8bc769d5504ebeeae}
\hypertarget{mag_plot_8m_ac06af72866e1ad098c66d9c182c77646}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!vis3d@{vis3d}}
\index{vis3d@{vis3d}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{vis3d}]{\setlength{\rightskip}{0pt plus 5cm}axis vis3d}}\label{mag_plot_8m_ac06af72866e1ad098c66d9c182c77646}
\hypertarget{mag_plot_8m_ab9c49d889082cfa6e9f1fe1be0fddced}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!Winv@{Winv}}
\index{Winv@{Winv}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{Winv}]{\setlength{\rightskip}{0pt plus 5cm}The rotation {\bf and} scale factors Winv}}\label{mag_plot_8m_ab9c49d889082cfa6e9f1fe1be0fddced}
{\bfseries Initial value\-:}
\begin{DoxyCode}
= [0.508 0.711 0.487
-0.693 0.000905 0.721
0.512 -0.704 0.493]\textcolor{stringliteral}{'}
\end{DoxyCode}
\hypertarget{mag_plot_8m_a9336ebf25087d91c818ee6e9ec29f8c1}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!x@{x}}
\index{x@{x}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{x}]{\setlength{\rightskip}{0pt plus 5cm}x = {\bf Hnew}(\-:,1)-\/{\bf B}(1)}}\label{mag_plot_8m_a9336ebf25087d91c818ee6e9ec29f8c1}
\hypertarget{mag_plot_8m_a2fb1c5cf58867b5bbc9a1b145a86f3a0}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!y@{y}}
\index{y@{y}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{y}]{\setlength{\rightskip}{0pt plus 5cm}y = {\bf Hnew}(\-:,2)-\/{\bf B}(2)}}\label{mag_plot_8m_a2fb1c5cf58867b5bbc9a1b145a86f3a0}
\hypertarget{mag_plot_8m_aaeddb3af347c13f3d0915fb2e613acce}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!yaw@{yaw}}
\index{yaw@{yaw}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{yaw}]{\setlength{\rightskip}{0pt plus 5cm}yaw = 0}}\label{mag_plot_8m_aaeddb3af347c13f3d0915fb2e613acce}
\hypertarget{mag_plot_8m_a25ed1bcb423b0b7200f485fc5ff71c8e}{\index{mag\-Plot.\-m@{mag\-Plot.\-m}!z@{z}}
\index{z@{z}!magPlot.m@{mag\-Plot.\-m}}
\subsubsection[{z}]{\setlength{\rightskip}{0pt plus 5cm}z = {\bf Hnew}(\-:,3)-\/{\bf B}(3)}}\label{mag_plot_8m_a25ed1bcb423b0b7200f485fc5ff71c8e}
