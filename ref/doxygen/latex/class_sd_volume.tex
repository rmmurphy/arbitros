\hypertarget{class_sd_volume}{\section{Sd\-Volume Class Reference}
\label{class_sd_volume}\index{Sd\-Volume@{Sd\-Volume}}
}


Access F\-A\-T16 and F\-A\-T32 volumes on S\-D and S\-D\-H\-C cards.  




{\ttfamily \#include $<$Sd\-Volume.\-h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_sd_volume_a8946a066e838455b790485f0f0b84a30}{Sd\-Volume} ()
\item 
\hyperlink{unioncache__t}{cache\-\_\-t} $\ast$ \hyperlink{class_sd_volume_aeb92f3b3c0e81e39f4dd123106f882a3}{cache\-Clear} ()
\item 
bool \hyperlink{class_sd_volume_ada2a0a79cd7ce879d8c6daf35ad86834}{init} (\hyperlink{class_sd2_card}{Sd2\-Card} $\ast$dev)
\item 
bool \hyperlink{class_sd_volume_af178086a8274ddf1346bed1a108622b3}{init} (\hyperlink{class_sd2_card}{Sd2\-Card} $\ast$dev, uint8\-\_\-t \hyperlink{_sd_fat_structs_8h_aa65f87792f271fc6cfa70980af6ac3dd}{part})
\item 
uint8\-\_\-t \hyperlink{class_sd_volume_a8e6f1dd240dc430fdd1caf9742a56a7e}{blocks\-Per\-Cluster} () const 
\item 
uint32\-\_\-t \hyperlink{class_sd_volume_aa3b929c0b3148bcef7622028d6978b8c}{blocks\-Per\-Fat} () const 
\item 
uint32\-\_\-t \hyperlink{class_sd_volume_afcf5e92320a02c89758f5b07f8426d53}{cluster\-Count} () const 
\item 
uint8\-\_\-t \hyperlink{class_sd_volume_aabed24c62fcedb89c4218b02c3763ae6}{cluster\-Size\-Shift} () const 
\item 
uint32\-\_\-t \hyperlink{class_sd_volume_ae95e3f4239d7ccb74d45a7e0cc4f499c}{data\-Start\-Block} () const 
\item 
uint8\-\_\-t \hyperlink{class_sd_volume_a01935bdcf6a336f292102f7f23a2a38f}{fat\-Count} () const 
\item 
uint32\-\_\-t \hyperlink{class_sd_volume_a1ff040834f446f329e00cc71284d92fc}{fat\-Start\-Block} () const 
\item 
uint8\-\_\-t \hyperlink{class_sd_volume_ab14a92a01d77303d73fd5acd54ffbc16}{fat\-Type} () const 
\item 
int32\-\_\-t \hyperlink{class_sd_volume_ae00ae9399f79dd2173e9957cf7e274f8}{free\-Cluster\-Count} ()
\item 
uint32\-\_\-t \hyperlink{class_sd_volume_abc35aae90237c3a555574e94d5763f18}{root\-Dir\-Entry\-Count} () const 
\item 
uint32\-\_\-t \hyperlink{class_sd_volume_a9867c10a00c41a6c23471287be38ced3}{root\-Dir\-Start} () const 
\item 
\hyperlink{class_sd2_card}{Sd2\-Card} $\ast$ \hyperlink{class_sd_volume_adf6dac7ae17bdf477d077482dc4d76d7}{sd\-Card} ()
\item 
bool \hyperlink{class_sd_volume_a6359ecffed0d28a726e355ea86089899}{dbg\-Fat} (uint32\-\_\-t n, uint32\-\_\-t $\ast$v)
\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\hypertarget{class_sd_volume_a05e466c179d34fec11c4406677fe0533}{class {\bfseries Sd\-Base\-File}}\label{class_sd_volume_a05e466c179d34fec11c4406677fe0533}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Access F\-A\-T16 and F\-A\-T32 volumes on S\-D and S\-D\-H\-C cards. 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_sd_volume_a8946a066e838455b790485f0f0b84a30}{\index{Sd\-Volume@{Sd\-Volume}!Sd\-Volume@{Sd\-Volume}}
\index{Sd\-Volume@{Sd\-Volume}!SdVolume@{Sd\-Volume}}
\subsubsection[{Sd\-Volume}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Sd\-Volume} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_sd_volume_a8946a066e838455b790485f0f0b84a30}
Create an instance of \hyperlink{class_sd_volume}{Sd\-Volume} 

\subsection{Member Function Documentation}
\hypertarget{class_sd_volume_a8e6f1dd240dc430fdd1caf9742a56a7e}{\index{Sd\-Volume@{Sd\-Volume}!blocks\-Per\-Cluster@{blocks\-Per\-Cluster}}
\index{blocks\-Per\-Cluster@{blocks\-Per\-Cluster}!SdVolume@{Sd\-Volume}}
\subsubsection[{blocks\-Per\-Cluster}]{\setlength{\rightskip}{0pt plus 5cm}uint8\-\_\-t blocks\-Per\-Cluster (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_sd_volume_a8e6f1dd240dc430fdd1caf9742a56a7e}
\begin{DoxyReturn}{Returns}
The volume's cluster size in blocks. 
\end{DoxyReturn}
\hypertarget{class_sd_volume_aa3b929c0b3148bcef7622028d6978b8c}{\index{Sd\-Volume@{Sd\-Volume}!blocks\-Per\-Fat@{blocks\-Per\-Fat}}
\index{blocks\-Per\-Fat@{blocks\-Per\-Fat}!SdVolume@{Sd\-Volume}}
\subsubsection[{blocks\-Per\-Fat}]{\setlength{\rightskip}{0pt plus 5cm}uint32\-\_\-t blocks\-Per\-Fat (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_sd_volume_aa3b929c0b3148bcef7622028d6978b8c}
\begin{DoxyReturn}{Returns}
The number of blocks in one F\-A\-T. 
\end{DoxyReturn}
\hypertarget{class_sd_volume_aeb92f3b3c0e81e39f4dd123106f882a3}{\index{Sd\-Volume@{Sd\-Volume}!cache\-Clear@{cache\-Clear}}
\index{cache\-Clear@{cache\-Clear}!SdVolume@{Sd\-Volume}}
\subsubsection[{cache\-Clear}]{\setlength{\rightskip}{0pt plus 5cm}{\bf cache\-\_\-t}$\ast$ cache\-Clear (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_sd_volume_aeb92f3b3c0e81e39f4dd123106f882a3}
Clear the cache and returns a pointer to the cache. Used by the Wave\-R\-P recorder to do raw write to the S\-D card. Not for normal apps. \begin{DoxyReturn}{Returns}
A pointer to the cache buffer or zero if an error occurs. 
\end{DoxyReturn}
\hypertarget{class_sd_volume_afcf5e92320a02c89758f5b07f8426d53}{\index{Sd\-Volume@{Sd\-Volume}!cluster\-Count@{cluster\-Count}}
\index{cluster\-Count@{cluster\-Count}!SdVolume@{Sd\-Volume}}
\subsubsection[{cluster\-Count}]{\setlength{\rightskip}{0pt plus 5cm}uint32\-\_\-t cluster\-Count (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_sd_volume_afcf5e92320a02c89758f5b07f8426d53}
\begin{DoxyReturn}{Returns}
The total number of clusters in the volume. 
\end{DoxyReturn}
\hypertarget{class_sd_volume_aabed24c62fcedb89c4218b02c3763ae6}{\index{Sd\-Volume@{Sd\-Volume}!cluster\-Size\-Shift@{cluster\-Size\-Shift}}
\index{cluster\-Size\-Shift@{cluster\-Size\-Shift}!SdVolume@{Sd\-Volume}}
\subsubsection[{cluster\-Size\-Shift}]{\setlength{\rightskip}{0pt plus 5cm}uint8\-\_\-t cluster\-Size\-Shift (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_sd_volume_aabed24c62fcedb89c4218b02c3763ae6}
\begin{DoxyReturn}{Returns}
The shift count required to multiply by blocks\-Per\-Cluster. 
\end{DoxyReturn}
\hypertarget{class_sd_volume_ae95e3f4239d7ccb74d45a7e0cc4f499c}{\index{Sd\-Volume@{Sd\-Volume}!data\-Start\-Block@{data\-Start\-Block}}
\index{data\-Start\-Block@{data\-Start\-Block}!SdVolume@{Sd\-Volume}}
\subsubsection[{data\-Start\-Block}]{\setlength{\rightskip}{0pt plus 5cm}uint32\-\_\-t data\-Start\-Block (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_sd_volume_ae95e3f4239d7ccb74d45a7e0cc4f499c}
\begin{DoxyReturn}{Returns}
The logical block number for the start of file data. 
\end{DoxyReturn}
\hypertarget{class_sd_volume_a6359ecffed0d28a726e355ea86089899}{\index{Sd\-Volume@{Sd\-Volume}!dbg\-Fat@{dbg\-Fat}}
\index{dbg\-Fat@{dbg\-Fat}!SdVolume@{Sd\-Volume}}
\subsubsection[{dbg\-Fat}]{\setlength{\rightskip}{0pt plus 5cm}bool dbg\-Fat (
\begin{DoxyParamCaption}
\item[{uint32\-\_\-t}]{n, }
\item[{uint32\-\_\-t $\ast$}]{v}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_sd_volume_a6359ecffed0d28a726e355ea86089899}
Debug access to F\-A\-T table


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em n} & cluster number. \\
\hline
\mbox{\tt out}  & {\em v} & value of entry \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true for success or false for failure 
\end{DoxyReturn}
\hypertarget{class_sd_volume_a01935bdcf6a336f292102f7f23a2a38f}{\index{Sd\-Volume@{Sd\-Volume}!fat\-Count@{fat\-Count}}
\index{fat\-Count@{fat\-Count}!SdVolume@{Sd\-Volume}}
\subsubsection[{fat\-Count}]{\setlength{\rightskip}{0pt plus 5cm}uint8\-\_\-t fat\-Count (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_sd_volume_a01935bdcf6a336f292102f7f23a2a38f}
\begin{DoxyReturn}{Returns}
The number of F\-A\-T structures on the volume. 
\end{DoxyReturn}
\hypertarget{class_sd_volume_a1ff040834f446f329e00cc71284d92fc}{\index{Sd\-Volume@{Sd\-Volume}!fat\-Start\-Block@{fat\-Start\-Block}}
\index{fat\-Start\-Block@{fat\-Start\-Block}!SdVolume@{Sd\-Volume}}
\subsubsection[{fat\-Start\-Block}]{\setlength{\rightskip}{0pt plus 5cm}uint32\-\_\-t fat\-Start\-Block (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_sd_volume_a1ff040834f446f329e00cc71284d92fc}
\begin{DoxyReturn}{Returns}
The logical block number for the start of the first F\-A\-T. 
\end{DoxyReturn}
\hypertarget{class_sd_volume_ab14a92a01d77303d73fd5acd54ffbc16}{\index{Sd\-Volume@{Sd\-Volume}!fat\-Type@{fat\-Type}}
\index{fat\-Type@{fat\-Type}!SdVolume@{Sd\-Volume}}
\subsubsection[{fat\-Type}]{\setlength{\rightskip}{0pt plus 5cm}uint8\-\_\-t fat\-Type (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_sd_volume_ab14a92a01d77303d73fd5acd54ffbc16}
\begin{DoxyReturn}{Returns}
The F\-A\-T type of the volume. Values are 12, 16 or 32. 
\end{DoxyReturn}
\hypertarget{class_sd_volume_ae00ae9399f79dd2173e9957cf7e274f8}{\index{Sd\-Volume@{Sd\-Volume}!free\-Cluster\-Count@{free\-Cluster\-Count}}
\index{free\-Cluster\-Count@{free\-Cluster\-Count}!SdVolume@{Sd\-Volume}}
\subsubsection[{free\-Cluster\-Count}]{\setlength{\rightskip}{0pt plus 5cm}int32\-\_\-t free\-Cluster\-Count (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_sd_volume_ae00ae9399f79dd2173e9957cf7e274f8}
Volume free space in clusters.

\begin{DoxyReturn}{Returns}
Count of free clusters for success or -\/1 if an error occurs. 
\end{DoxyReturn}
\hypertarget{class_sd_volume_ada2a0a79cd7ce879d8c6daf35ad86834}{\index{Sd\-Volume@{Sd\-Volume}!init@{init}}
\index{init@{init}!SdVolume@{Sd\-Volume}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}bool init (
\begin{DoxyParamCaption}
\item[{{\bf Sd2\-Card} $\ast$}]{dev}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_sd_volume_ada2a0a79cd7ce879d8c6daf35ad86834}
Initialize a F\-A\-T volume. Try partition one first then try super floppy format.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em dev} & The \hyperlink{class_sd2_card}{Sd2\-Card} where the volume is located.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value one, true, is returned for success and the value zero, false, is returned for failure. Reasons for failure include not finding a valid partition, not finding a valid F\-A\-T file system or an I/\-O error. 
\end{DoxyReturn}
\hypertarget{class_sd_volume_af178086a8274ddf1346bed1a108622b3}{\index{Sd\-Volume@{Sd\-Volume}!init@{init}}
\index{init@{init}!SdVolume@{Sd\-Volume}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}bool init (
\begin{DoxyParamCaption}
\item[{{\bf Sd2\-Card} $\ast$}]{dev, }
\item[{uint8\-\_\-t}]{part}
\end{DoxyParamCaption}
)}}\label{class_sd_volume_af178086a8274ddf1346bed1a108622b3}
Initialize a F\-A\-T volume.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em dev} & The S\-D card where the volume is located.\\
\hline
\mbox{\tt in}  & {\em part} & The partition to be used. Legal values for {\itshape part} are 1-\/4 to use the corresponding partition on a device formatted with a M\-B\-R, Master Boot Record, or zero if the device is formatted as a super floppy with the F\-A\-T boot sector in block zero.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value one, true, is returned for success and the value zero, false, is returned for failure. Reasons for failure include not finding a valid partition, not finding a valid F\-A\-T file system in the specified partition or an I/\-O error. 
\end{DoxyReturn}
\hypertarget{class_sd_volume_abc35aae90237c3a555574e94d5763f18}{\index{Sd\-Volume@{Sd\-Volume}!root\-Dir\-Entry\-Count@{root\-Dir\-Entry\-Count}}
\index{root\-Dir\-Entry\-Count@{root\-Dir\-Entry\-Count}!SdVolume@{Sd\-Volume}}
\subsubsection[{root\-Dir\-Entry\-Count}]{\setlength{\rightskip}{0pt plus 5cm}uint32\-\_\-t root\-Dir\-Entry\-Count (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_sd_volume_abc35aae90237c3a555574e94d5763f18}
\begin{DoxyReturn}{Returns}
The number of entries in the root directory for F\-A\-T16 volumes. 
\end{DoxyReturn}
\hypertarget{class_sd_volume_a9867c10a00c41a6c23471287be38ced3}{\index{Sd\-Volume@{Sd\-Volume}!root\-Dir\-Start@{root\-Dir\-Start}}
\index{root\-Dir\-Start@{root\-Dir\-Start}!SdVolume@{Sd\-Volume}}
\subsubsection[{root\-Dir\-Start}]{\setlength{\rightskip}{0pt plus 5cm}uint32\-\_\-t root\-Dir\-Start (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_sd_volume_a9867c10a00c41a6c23471287be38ced3}
\begin{DoxyReturn}{Returns}
The logical block number for the start of the root directory on F\-A\-T16 volumes or the first cluster number on F\-A\-T32 volumes. 
\end{DoxyReturn}
\hypertarget{class_sd_volume_adf6dac7ae17bdf477d077482dc4d76d7}{\index{Sd\-Volume@{Sd\-Volume}!sd\-Card@{sd\-Card}}
\index{sd\-Card@{sd\-Card}!SdVolume@{Sd\-Volume}}
\subsubsection[{sd\-Card}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Sd2\-Card}$\ast$ sd\-Card (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_sd_volume_adf6dac7ae17bdf477d077482dc4d76d7}
\hyperlink{class_sd2_card}{Sd2\-Card} object for this volume \begin{DoxyReturn}{Returns}
pointer to \hyperlink{class_sd2_card}{Sd2\-Card} object. 
\end{DoxyReturn}


The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
C\-:/arbitros/trunk/libraries/sd/\-Sd\-Fat/\hyperlink{_sd_volume_8h}{Sd\-Volume.\-h}\item 
C\-:/arbitros/trunk/libraries/sd/\-Sd\-Fat/Sd\-Volume.\-cpp\end{DoxyCompactItemize}
